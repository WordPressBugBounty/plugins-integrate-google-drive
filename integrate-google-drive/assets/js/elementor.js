(()=>{"use strict";function e(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})))}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){d=!0,l=e},f:function(){try{a||null==n.return||n.return()}finally{if(d)throw l}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,n,o){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,n||"default");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}var a,d,u;a=jQuery,d=window.ModuleBuilder,(u={init:function(){a(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/igd_shortcodes.default",u.handleModuleSelection),elementor.channels.editor.on("igd:editor:edit_module",u.openModuleBuilder),elementor.channels.editor.on("igd:editor:add_module",u.openModuleBuilder),u.initPromotion()}))},ready:function(){"undefined"!=typeof elementor&&elementor.hooks.addFilter("elementor_pro/forms/content_template/field/google_drive_upload",(function(t,n){var o=n.module_id,r={type:"uploader",isFormUploader:"elementor",isRequired:n.required,width:"100%",height:""};if(o){var l=igd.shortcodes.find((function(e){return e.id==o})),a=(null==l?void 0:l.config)||l;a&&(r=i(i({},r),a))}var d=r,u=d.width,c=d.height;return'<div class="igd igd-shortcode-wrap igd-shortcode-uploader" style="width: '.concat(u,"; height: ").concat(c,";\" data-shortcode-data='").concat(e(JSON.stringify(r)),"'></div>")}),10)},openModuleBuilder:function(e){var t=null==e?void 0:e.$el,n=null,o=!1,r=null;t&&(n=window.parent.jQuery('[data-setting="module_id"]').val(),o=t.hasClass("elementor-control-edit_field_form")||t.hasClass("elementor-control-edit_field_metform"),r=t.hasClass("elementor-control-edit_field_form")?"elementor":"metform",o&&"metform"!==r&&(n=window.parent.jQuery('.elementor-repeater-row-controls.editable [data-setting="module_id"]').val()||n)),Swal.fire({target:document.querySelector(".elementor-element-editable"),html:'<div id="igd-elementor-module-builder" class="igd-module-builder-modal-wrap"></div>',showConfirmButton:!1,customClass:{container:"igd-swal igd-module-builder-modal-container"},didOpen:function(){ReactDOM.render(React.createElement(d,{isModuleBuilder:{type:o?r:"post",id:new URLSearchParams(window.location.search).get("elementor-preview")||""},isFormBuilder:o&&r,editId:n,addType:t?"":"init",onUpdate:function(e,t){u.updateModuleData(e,t),Swal.close()},onClose:function(){return Swal.close()}}),document.getElementById("igd-elementor-module-builder"))},willClose:function(){ReactDOM.unmountComponentAtNode(document.getElementById("igd-elementor-module-builder"))}})},handleModuleSelection:function(e){var t=e.find(".module_id");t.select2({width:"100%",placeholder:wp.i18n.__("Select a module","integrate-google-drive"),allowClear:!0,minimumResultsForSearch:10,templateResult:function(e){if(!e.id)return e.text;var t=a(e.element).data("image"),n=e.text||"";return t?a('<span class="igd-select2-option"><img src="'.concat(t,'"> ').concat(n,"</span>")):a("<span>").text(n)},templateSelection:function(e){var t=a(e.element).data("image"),n=e.text||"";return t?a('<span class="igd-select2-selection"><img src="'.concat(t,'"> ').concat(n,"</span>")):a("<span>").text(n)}}),t.length&&t.on("change",(function(){var e=this.value,t=window.parent.jQuery('[data-setting="module_id"]');t.val(e),t[0].dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))}))},updateModuleData:function(e,t){var n=window.parent.jQuery('[data-setting="module_id"]');if(!n.find('option[value="'.concat(e,'"]')).length){var o=new Option(t.title,e);n.append(o)}n.val(e).trigger("change")},initPromotion:function(){void 0!==parent.document&&parent.document.addEventListener("mousedown",(function(e){var t,o=n(parent.document.querySelectorAll(".elementor-element--promotion"));try{for(o.s();!(t=o.n()).done;){var r=t.value;if(r.contains(e.target)){var i=parent.document.querySelector("#elementor-element--promotion__dialog"),l=r.querySelector(".icon > i"),a=null==l?void 0:l.classList.toString().includes("igd"),d=i.querySelector(".dialog-buttons-action"),u=i.querySelector(".igd-dialog-buttons-action");if(a)if(e.stopImmediatePropagation(),d.style.display="none",u)u.style.display="";else{var c=document.createElement("a");c.className="dialog-button dialog-action dialog-buttons-action elementor-button elementor-button-success igd-dialog-buttons-action",c.href=igd.upgradeUrl,c.textContent=wp.i18n.__("GET PRO","integrate-google-drive"),d.insertAdjacentElement("afterend",c)}else d.style.display="",u&&(u.style.display="none");break}}}catch(e){o.e(e)}finally{o.f()}}))}}).init(),a(document).ready(u.ready)})();